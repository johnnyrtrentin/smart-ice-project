<ion-header>
    <ion-toolbar>
        <ion-buttons slot="start">
            <ion-back-button></ion-back-button>
        </ion-buttons>
        <ion-title><strong>Insira seus Dados</strong></ion-title>
    </ion-toolbar>
</ion-header>

<ion-content>
    <form [formGroup]="userForm" (ngSubmit)="submitData()">
        <ion-item lines="full">
            <ion-label position="floating">
                <ion-icon name="school-outline"></ion-icon> Curso</ion-label>
            <ion-input type="text" formControlName="course" required></ion-input>

            <div *ngIf="course.invalid && (course.dirty || course.touched)" class="error-msg">
                <div *ngIf="course.errors.required">
                    O campo <strong>curso</strong> é obrigatório
                </div>
            </div>
        </ion-item>

        <ion-item lines="full">
            <ion-label position="floating">
                <ion-icon name="chatbubbles-outline"></ion-icon> Turma</ion-label>
            <ion-input type="text" formControlName="class"></ion-input>

            <div *ngIf="class.invalid && (class.dirty || class.touched)" class="error-msg">
                <div *ngIf="class.errors.required">
                    O campo <strong>turma</strong> é obrigatório
                </div>
            </div>
        </ion-item>

        <ion-item lines="full">
            <ion-label position="floating">
                <ion-icon name="book-outline"></ion-icon> Disciplina</ion-label>
            <ion-input type="text" formControlName="discipline"></ion-input>

            <div *ngIf="discipline.invalid && (discipline.dirty || discipline.touched)" class="error-msg">
                <div *ngIf="discipline.errors.required">
                    O campo <strong>disciplina</strong> é obrigatório
                </div>
            </div>
        </ion-item>

        <ion-item lines="full">
            <ion-label position="floating">
                <ion-icon name="bookmark-outline"></ion-icon> Selecione a Sala</ion-label>
            
                  <ion-select name="category" [selectedText]="selectcategory" [(ngModel)]="selectcategory" (ionChange)="codeSelected()" >
                      <ion-select-option value="1" >B 200</ion-select-option>
                      <ion-select-option value="2">B 201</ion-select-option>
                      <ion-select-option value="3">B 202</ion-select-option>
                      <ion-select-option value="4" >B 203</ion-select-option>
                      <ion-select-option value="5">B 204</ion-select-option>
                      </ion-select>
          

            <div *ngIf="classRoom.invalid && (classRoom.dirty || classRoom.touched)" class="error-msg">
                <div *ngIf="classRoom.errors.required">
                    O campo <strong>Sala</strong> é obrigatório
                </div>
            </div>
        </ion-item>

        <ion-item lines="full">
            <ion-label position="floating">
                <ion-icon name="time-outline"></ion-icon> Horário de Saída do Local</ion-label>
                <ion-datetime displayFormat="HH:mm" formControlName="exitTime"></ion-datetime>

            <div *ngIf="exitTime.invalid && (exitTime.dirty || exitTime.touched)" class="error-msg">
                <div *ngIf="exitTime.errors.required">
                    O campo <strong>horário de saída do local</strong> é obrigatório
                </div>
            </div>
        </ion-item>

        <ion-row>
            <ion-col style="padding-top: 35px;">
                <ion-progress-bar 
                    type="indeterminate" 
                    color="medium"
                    *ngIf="loadingButton">
                </ion-progress-bar>
                <ion-button
                    type="submit"
                    color="success"
                    expand="block"
                    [disabled]="userForm.status === 'INVALID' || loadingButton"
                >
                    <strong>Confirmar</strong>
                </ion-button>
            </ion-col>
        </ion-row>
    </form>
</ion-content>